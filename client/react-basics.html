<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>YouTube Video Search</title>
    <style>
        body {
            font-family: Arial, sans-serif;
            padding: 20px;
            background-color: #f4f4f4;
            display: flex;
        }

        /* Left container for modules */
        #left-container {
            width: 25%;
            padding-right: 20px;
            border-right: 2px solid #ddd;
            overflow-y: auto;
            height: 100vh;
        }

        #left-container h2 {
            margin-bottom: 10px;
        }

        /* Style for each module list */
        .module {
            margin-bottom: 20px;
        }

        .module ul {
            list-style: none;
            padding-left: 0;
        }

        .module li {
            margin-bottom: 10px;
        }

        .module a {
            color: #3b82f6;
            text-decoration: none;
            padding: 5px 0;
            display: block;
        }

        .module a:hover {
            background-color: #e0e7ff;
            padding-left: 5px;
        }

        /* Right container for thumbnails */
        #right-container {
            width: 75%;
            padding-left: 20px;
        }

        #thumbnails-container {
            display: flex;
            flex-direction: column;
            gap: 10px;
        }

        .thumbnail {
            cursor: pointer;
            border: 1px solid #ddd;
            padding: 5px;
            background-color: #fff;
            transition: background-color 0.3s;
            display: flex;
            align-items: center;
            gap: 10px;
        }

        .thumbnail:hover {
            background-color: #eee;
        }

        .thumbnail img {
            width: 120px;
            height: auto;
        }

        .video-title {
            font-size: 14px;
        }
       

.take-exam-btn {
    display: inline-block;
    padding: 10px 20px;
    font-size: 18px;
    color: #ffffff;
    background-color: #1a73e8;
    border: none;
    border-radius: 5px;
    text-decoration: none;
    box-shadow: 0 4px 6px rgba(0, 0, 0, 0.1);
    transition: background-color 0.3s ease, box-shadow 0.3s ease;
}

.take-exam-btn:hover {
    background-color: #155ab2;
    box-shadow: 0 6px 10px rgba(0, 0, 0, 0.15);
}


    </style>
</head>

<body>
    <!-- Left Side: Modules and Topics -->

    <div id="left-container">
        <h2>Modules</h2>

        <!-- Module: React Components -->
        <div class="module">
            <h3>React Components</h3>
            <ul>
                <li><a href="#react-real-world" id="react-real-world" onclick="handleLinkClick(event)">How is React used in the real world?</a></li>
                <li><a href="#why-react" id="why-react" onclick="handleLinkClick(event)">Why React?</a></li>
                <li><a href="#react-js-overview" id="react-js-overview" onclick="handleLinkClick(event)">React.js overview</a></li>
                <li><a href="#functional-components" id="functional-components" onclick="handleLinkClick(event)">Introduction to functional components</a></li>
                <li><a href="#creating-components" id="creating-components" onclick="handleLinkClick(event)">Creating React components</a></li>
                <li><a href="#project-structure" id="project-structure" onclick="handleLinkClick(event)">The React project structure</a></li>
                <li><a href="#importing-components" id="importing-components" onclick="handleLinkClick(event)">Importing components</a></li>
                <li><a href="#props-principles" id="props-principles" onclick="handleLinkClick(event)">Principles of components: Props</a></li>
                <li><a href="#using-props" id="using-props" onclick="handleLinkClick(event)">Using props in components</a></li>
                <li><a href="#jsx-intro" id="jsx-intro" onclick="handleLinkClick(event)">Introducing JSX</a></li>
                <li><a href="#practical-styling" id="practical-styling" onclick="handleLinkClick(event)">Practical styling</a></li>
                <li><a href="#embedded-jsx" id="embedded-jsx" onclick="handleLinkClick(event)">Embedded JSX expressions</a></li>
                <li><a href="#jsx-attributes" id="jsx-attributes" onclick="handleLinkClick(event)">Embedding in attributes</a></li>
            </ul>
        </div>
    
        <!-- Module: Data and State -->
        <div class="module">
            <h3>Data and State</h3>
            <ul>
                <li><a href="#types-of-events" id="types-of-events" onclick="handleLinkClick(event)">Types of events</a></li>
                <li><a href="#event-handling" id="event-handling" onclick="handleLinkClick(event)">Common event handling</a></li>
                <li><a href="#syntax-handlers" id="syntax-handlers" onclick="handleLinkClick(event)">Syntax for handlers</a></li>
                <li><a href="#user-events" id="user-events" onclick="handleLinkClick(event)">User events</a></li>
                <li><a href="#parent-child-data" id="parent-child-data" onclick="handleLinkClick(event)">Parent-child data flow</a></li>
                <li><a href="#children-data" id="children-data" onclick="handleLinkClick(event)">Children and data</a></li>
                <li><a href="#hooks-intro" id="what-are-hooks" onclick="handleLinkClick(event)">What are hooks?</a></li>
                <li><a href="#state-intro" id="what-is-state?" onclick="handleLinkClick(event)">What is state?</a></li>
                <li><a href="#observing-state" id="observing-state" onclick="handleLinkClick(event)">Observing state</a></li>
                <li><a href="#managing-state" id="managing-state" onclick="handleLinkClick(event)">Managing state</a></li>
                <li><a href="#state-management" id="state-management" onclick="handleLinkClick(event)">React state management</a></li>
                <li><a href="#stateful-vs-stateless" id="stateful-vs-stateless" onclick="handleLinkClick(event)">Stateful vs. stateless</a></li>
            </ul>
        </div>
    
        <!-- Module: Navigation, Updating, and Assets in React.js -->
        <div class="module">
            <h3>Navigation, Updating, and Assets in React.js</h3>
            <ul>
                <li><a href="#navigation-types" id="navigation-types" onclick="handleLinkClick(event)">Basic types of navigation</a></li>
                <li><a href="#navbar" id="navbar" onclick="handleLinkClick(event)">The navbar</a></li>
                <li><a href="#conditional-rendering" id="conditional-rendering" onclick="handleLinkClick(event)">Conditional rendering</a></li>
                <li><a href="#single-view-updates" id="single-view-updates" onclick="handleLinkClick(event)">Single view conditional updates</a></li>
                <li><a href="#assets-intro" id="assets-intro" onclick="handleLinkClick(event)">What is an asset and where does it live?</a></li>
                <li><a href="#using-assets" id="using-assets" onclick="handleLinkClick(event)">Using embedded assets</a></li>
                <li><a href="#audio-video" id="audio-video" onclick="handleLinkClick(event)">Audio and video</a></li>
                <li><a href="#create-av-component" id="create-av-component" onclick="handleLinkClick(event)">Create an audio/video component</a></li>
            </ul>
        </div>
        <div class="button-container">
            <a href="finalexampage.html" class="take-exam-btn">Take Exam</a>
        </div>
    </div>

    <!-- Right Side: Video Thumbnails -->
    <div id="right-container">
        <div id="thumbnails-container"></div>
    </div>

    <script>
         window.addEventListener("DOMContentLoaded", function () {
            const urlHash = window.location.hash;
            console.log("url hash:",urlHash)
            if (urlHash) {
                const topicId = urlHash.substring(1); // Remove the leading '#'
                const topicElement = document.getElementById(topicId);
                console.log("topicelement",topicElement);
                if (topicElement) {
                    topicElement.scrollIntoView({ behavior: "smooth", block: "start" });
                    searchYouTubeVideos(topicElement.textContent.trim()); // Fetch videos for the topic in URL
                }
            } else {
                // Load videos for the first topic in the first module by default
                const firstTopicElement = document.querySelector('#left-container .module ul li a');
                
                console.log("first topic element",firstTopicElement);
                if (firstTopicElement) {
                    const firstTopicId = firstTopicElement.getAttribute('href').substring(1); 
                    searchYouTubeVideos(firstTopicId);
                }
            }
        });
        function handleLinkClick(event) {
            event.preventDefault();
            const topicName = event.target.textContent.trim();
            const moduleName="REACT COURSE"
            const searchQuery = `${moduleName} ${topicName}`;
            searchYouTubeVideos(searchQuery);
        }

 
        async function searchYouTubeVideos(searchQuery) {
        const baseUrl = 'https://eduflex-inator.onrender.com';
            try {
                const response = await fetch(`${baseUrl}/searchYouTubeVideos`, {
                    method: 'POST',
                    headers: { 'Content-Type': 'application/json' },
                    body: JSON.stringify({ searchQuery: searchQuery }),
                });
                console.log("response from serve",response)
                const videos = await response.json();
                console.log("Fetched topics:", videos);
                displayThumbnails(videos);
                
            } catch (error) {
                console.error('Error fetching topics:', error);
            }
        
       }

function displayThumbnails(videos) {
    const container = document.getElementById('thumbnails-container');
    container.innerHTML = '';

    if (videos.length === 0) {
        const noVideosMessage = document.createElement('div');
        noVideosMessage.textContent = 'No valid videos found.';
        container.appendChild(noVideosMessage);
        return;
    }

    videos.forEach((item) => {
        const videoId = item.id.videoId;
        const title = item.snippet.title;
        const thumbnailUrl = `https://i.ytimg.com/vi/${videoId}/hqdefault.jpg`;

        const thumbnailDiv = document.createElement('div');
        thumbnailDiv.className = 'thumbnail';
        thumbnailDiv.onclick = () => {
            window.location.href = `video_page.html?videoId=${videoId}`;
        };

        const img = document.createElement('img');
        img.src = thumbnailUrl;
        img.alt = title;

        const videoTitle = document.createElement('div');
        videoTitle.className = 'video-title';
        videoTitle.textContent = title;

        thumbnailDiv.appendChild(img);
        thumbnailDiv.appendChild(videoTitle);
        container.appendChild(thumbnailDiv);
    });
}

    // When the "Take Exam" button is clicked, pass the course name via the query parameter.
    document.querySelector('.take-exam-btn').addEventListener('click', function (event) {
        event.preventDefault();
        const courseName = encodeURIComponent('React-Basics'); // Course name to pass

        // Redirect to finalexampage.html with the query string
        window.location.href = `finalexampage.html?courseName=${courseName}`;
    });


    </script>
</body>

</html>
